{% extends "base3.html" %} {% block title %}å›ºå®šã‚¿ã‚¹ã‚¯ç™»éŒ²{% endblock %} {%
block content %}

<div class="sched-header">
  <h1 class="sched-title">å›ºå®šã‚¿ã‚¹ã‚¯ç™»éŒ²</h1>
  <div class="sched-tab-container">
    <button class="sched-tab" id="schedTabTask">ã‚¿ã‚¹ã‚¯ç™»éŒ²</button>
    <button class="sched-tab sched-tab-active">å›ºå®šã‚¿ã‚¹ã‚¯ç™»éŒ²</button>
  </div>
</div>

<div class="sched-form-container">
  <form
    id="schedTaskForm"
    method="POST"
    action="{{ url_for('.schedule_form') }}"
  >
    <div class="sched-form-section">
      <div class="sched-form-label">
        <span>ã‚¿ã‚¹ã‚¯å</span>
        <a
          href="{{ url_for('schedule.schedule_list') }}"
          class="sched-template-link"
        >
          å›ºå®šã‚¿ã‚¹ã‚¯ä¸€è¦§ â˜°
        </a>
      </div>
      <input
        type="text"
        name="title"
        class="sched-form-input"
        placeholder="ä½•ã‚’ã™ã‚‹ï¼Ÿ"
        value="{{ task.title if task else '' }}"
        required
      />
    </div>

    <div class="sched-form-section">
      <div class="sched-time-inputs">
        <div class="sched-time-input-wrapper">
          <span class="sched-time-label">é–‹å§‹æ™‚é–“</span>
          <input
            type="time"
            name="start_time"
            class="sched-time-input"
            value="{{ task.start_time if task else '09:00' }}"
            required
          />
        </div>
        <div class="sched-time-input-wrapper">
          <span class="sched-time-label">çµ‚äº†æ™‚é–“</span>
          <input
            type="time"
            name="end_time"
            class="sched-time-input"
            value="{{ task.end_time if task else '09:30' }}"
            required
          />
        </div>
      </div>
    </div>

    <div class="sched-form-section">
      <div class="sched-form-label">ç¹°ã‚Šè¿”ã—ã‚¿ã‚¤ãƒ—</div>
      <div class="sched-category-selector">
        <button
          type="button"
          class="sched-category-btn sched-category-active"
          onclick="schedSelectRepeatType(this)"
        >
          æ¯æ—¥
        </button>
        <button
          type="button"
          class="sched-category-btn"
          onclick="schedSelectRepeatType(this)"
        >
          æ¯é€±
        </button>
      </div>
      <input
        type="hidden"
        name="repeat_type"
        id="schedRepeatType"
        value="æ¯æ—¥"
      />
    </div>

    <div class="sched-form-section">
      <div class="sched-form-label">ç¹°ã‚Šè¿”ã™æ›œæ—¥</div>
      <div class="sched-weekday-selector">
        {% set weekdays = ['æœˆ', 'ç«', 'æ°´', 'æœ¨', 'é‡‘', 'åœŸ', 'æ—¥'] %} {% for
        day in weekdays %}
        <button type="button" class="sched-weekday-btn" data-day="{{ day }}">
          {{ day }}
        </button>
        {% endfor %}
      </div>
      <input type="hidden" name="day_of_week" id="schedDayOfWeek" value="" />
    </div>

    <div class="sched-form-section">
      <div class="sched-form-label">å ´æ‰€</div>
      <input
        type="text"
        name="location"
        class="sched-form-input"
        placeholder="å ´æ‰€ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ï¼ˆä¾‹ï¼šä¼šè­°å®¤Aã€ã‚¸ãƒ ï¼‰"
        value="{{ task.location if task else '' }}"
      />
    </div>

    <div class="sched-form-section">
      <div class="sched-form-label">ã‚¿ã‚°</div>
      <div class="sched-category-selector">
        <button
          type="button"
          class="sched-category-btn sched-category-active"
          onclick="schedSelectTag(this)"
        >
          ä»•äº‹
        </button>
        <button
          type="button"
          class="sched-category-btn"
          onclick="schedSelectTag(this)"
        >
          ä¼‘æ†©
        </button>
        <button
          type="button"
          class="sched-category-btn"
          onclick="schedSelectTag(this)"
        >
          å¥åº·
        </button>
        <button
          type="button"
          class="sched-category-btn"
          onclick="schedSelectTag(this)"
        >
          è¶£å‘³
        </button>
      </div>
      <input type="hidden" name="tag" id="schedTag" value="ä»•äº‹" />
    </div>

    <div class="sched-form-section">
      <div class="sched-form-label">ãƒ¡ãƒ¢</div>
      <textarea
        name="memo"
        class="sched-memo-textarea"
        placeholder="ã‚¿ã‚¹ã‚¯ã®ãƒ¡ãƒ¢ã‚„æ‰‹é †ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„"
      >
{{ task.memo if task else '' }}</textarea
      >
    </div>

    <div class="sched-info-box">
      <span class="sched-info-icon">ğŸ’¡</span>
      <p class="sched-info-text">
        å›ºå®šã‚¿ã‚¹ã‚¯ã¯æ¯é€±æ±ºã¾ã£ãŸæ™‚é–“ã«ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã«è¿½åŠ ã•ã‚Œã‚‹ã‚ˆ
      </p>
    </div>
  </form>
</div>

<button type="submit" form="schedTaskForm" class="sched-submit-btn">
  ç™»éŒ²
</button>

<script>
  document
    .getElementById("schedTabTask")
    .addEventListener("click", function () {
      window.location.href = "{{ url_for('task.task_create') }}";
    });
</script>
<script src="{{ url_for('static', filename='js/register_schedule.js') }}"></script>

{% endblock %}
