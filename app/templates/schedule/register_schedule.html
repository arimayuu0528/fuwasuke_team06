{% extends "base3.html" %} {% block title %}å›ºå®šã‚¿ã‚¹ã‚¯ç™»éŒ²{% endblock %} {%block
content %}
<div class="header">
  <h1>å›ºå®šã‚¿ã‚¹ã‚¯ç™»éŒ²</h1>
  <div class="tab-container">
    <button class="tab">ã‚¿ã‚¹ã‚¯ç™»éŒ²</button>
    <button class="tab active">å›ºå®šã‚¿ã‚¹ã‚¯ç™»éŒ²</button>
  </div>
</div>

<div class="form-container">
  <form
    id="taskForm"
    method="POST"
    action="{{ url_for('schedule.schedule_form') }}"
  >
    <div class="form-section">
      <div class="form-label">
        <span>ã‚¿ã‚¹ã‚¯å</span>
        <a href="#" class="template-link">å›ºå®šã‚¿ã‚¹ã‚¯ä¸€è¦§ â˜°</a>
      </div>
      <input
        type="text"
        name="title"
        class="form-input"
        placeholder="ä½•ã‚’ã™ã‚‹ï¼Ÿ"
        value="{{ task.title if task else '' }}"
        required
      />
    </div>

    <div class="form-section">
      <div class="time-inputs">
        <div class="time-input-wrapper">
          <span class="time-label">é–‹å§‹æ™‚é–“</span>
          <input
            type="time"
            name="start_time"
            class="time-input"
            value="{{ task.start_time if task else '09:10' }}"
            required
          />
          <span class="time-icon">ğŸ•</span>
        </div>
        <div class="time-input-wrapper">
          <span class="time-label">çµ‚äº†æ™‚é–“</span>
          <input
            type="time"
            name="end_time"
            class="time-input"
            value="{{ task.end_time if task else '09:50' }}"
            required
          />
          <span class="time-icon">ğŸ•</span>
        </div>
      </div>
    </div>

    <div class="form-section">
      <div class="form-label">ç¹°ã‚Šè¿”ã™æ›œæ—¥</div>
      <div class="weekday-selector">
        {% set weekdays = ['æœˆ', 'ç«', 'æ°´', 'æœ¨', 'é‡‘', 'åœŸ', 'æ—¥'] %} {% set
        default_active = ['æœˆ', 'ç«', 'æ°´', 'æœ¨', 'é‡‘'] %} {% for day in
        weekdays %}
        <button
          type="button"
          class="weekday-btn {% if (task and day in task.active_days) or (not task and day in default_active) %}active{% endif %}"
          data-day="{{ day }}"
          onclick="toggleWeekday(this)"
        >
          {{ day }}
        </button>
        {% endfor %}
      </div>
      <input type="hidden" name="active_days" id="activeDays" value="" />
    </div>

    <div class="form-section">
      <div class="form-label">ã‚«ãƒ†ã‚´ãƒªãƒ¼</div>
      <div class="category-selector">
        {% set categories = ['ã‚»ãƒ«ãƒ•ã‚±ã‚¢', 'ã‚»ãƒ«ãƒ•ã‚±ã‚¢', 'ã‚»ãƒ«ãƒ•ã‚±ã‚¢'] %} {% for
        category in categories %}
        <button
          type="button"
          class="category-btn {% if loop.first %}active{% endif %}"
          onclick="selectCategory(this)"
        >
          {{ category }}
        </button>
        {% endfor %}
      </div>
      <input type="hidden" name="category" id="category" value="ã‚»ãƒ«ãƒ•ã‚±ã‚¢" />
    </div>

    <div class="form-section">
      <div class="form-label">ãƒ¢ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³</div>
      <textarea
        name="memo"
        class="memo-textarea"
        placeholder="ã‚¿ã‚¹ã‚¯ã®ãƒ¡ãƒ¢ã‚„æ‰‹é †ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„"
      >
{{ task.memo if task else '' }}</textarea
      >
    </div>

    <div class="info-box">
      <span class="info-icon">ãµã‚ã™ã‘</span>
      <p class="info-text">
        å›ºå®šã‚¿ã‚¹ã‚¯ã¯æ¯é€±æ±ºã¾ã£ãŸæ™‚é–“ã«ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã«è¿½åŠ ã•ã‚Œã‚‹ã‚ˆ
      </p>
    </div>
  </form>
</div>

<button type="submit" form="taskForm" class="submit-btn">ç™»éŒ²</button>
<script>
  function toggleWeekday(btn) {
    btn.classList.toggle("active");

    const actives = document.querySelectorAll(".weekday-btn.active");
    const days = Array.from(actives)
      .map((b) => b.dataset.day)
      .join("");
    document.getElementById("activeDays").value = days;
  }
</script>

{% endblock %}
