{% extends "base2.html" %} {% block title %}固定タスク登録{% endblock %} {%block
content %}
<div class="sched-header">
  <h1 class="sched-title">固定タスク登録</h1>
  <div class="sched-tab-container">
    <button class="sched-tab">タスク登録</button>
    <button class="sched-tab sched-tab-active">固定タスク登録</button>
  </div>
</div>

<div class="sched-form-container">
  <form
    id="schedTaskForm"
    method="POST"
    action="{{ url_for('.schedule_form') }}"
  >
    <div class="sched-form-section">
      <div class="sched-form-label">
        <span>タスク名</span>
        <a
          href="{{ url_for('schedule.schedule_list') }}"
          class="sched-template-link"
        >
          固定タスク一覧 ☰
        </a>
      </div>
      <input
        type="text"
        name="title"
        class="sched-form-input"
        placeholder="何をする？"
        value="{{ task.title if task else '' }}"
        required
      />
    </div>

    <div class="sched-form-section">
      <div class="sched-time-inputs">
        <div class="sched-time-input-wrapper">
          <span class="sched-time-label">開始時間</span>
          <input
            type="time"
            name="start_time"
            class="sched-time-input"
            value="{{ task.start_time if task else '09:00' }}"
            required
          />
        </div>
        <div class="sched-time-input-wrapper">
          <span class="sched-time-label">終了時間</span>
          <input
            type="time"
            name="end_time"
            class="sched-time-input"
            value="{{ task.end_time if task else '09:30' }}"
            required
          />
        </div>
      </div>
    </div>

    <div class="sched-form-section">
      <div class="sched-form-label">繰り返しタイプ</div>
      <div class="sched-category-selector">
        <button
          type="button"
          class="sched-category-btn sched-category-active"
          onclick="schedSelectRepeatType(this)"
        >
          毎日
        </button>
        <button
          type="button"
          class="sched-category-btn"
          onclick="schedSelectRepeatType(this)"
        >
          毎週
        </button>
      </div>
      <input
        type="hidden"
        name="repeat_type"
        id="schedRepeatType"
        value="毎日"
      />
    </div>

    <div class="sched-form-section">
      <div class="sched-form-label">繰り返す曜日</div>
      <div class="sched-weekday-selector">
        {% set weekdays = ['月', '火', '水', '木', '金', '土', '日'] %} {% for
        day in weekdays %}
        <button type="button" class="sched-weekday-btn" data-day="{{ day }}">
          {{ day }}
        </button>
        {% endfor %}
      </div>
      <input type="hidden" name="day_of_week" id="schedDayOfWeek" value="" />
    </div>

    <div class="sched-form-section">
      <div class="sched-form-label">場所</div>
      <input
        type="text"
        name="location"
        class="sched-form-input"
        placeholder="場所を入力してください（例：会議室A、ジム）"
        value="{{ task.location if task else '' }}"
      />
    </div>

    <div class="sched-form-section">
      <div class="sched-form-label">タグ</div>
      <div class="sched-category-selector">
        <button
          type="button"
          class="sched-category-btn sched-category-active"
          onclick="schedSelectTag(this)"
        >
          仕事
        </button>
        <button
          type="button"
          class="sched-category-btn"
          onclick="schedSelectTag(this)"
        >
          休憩
        </button>
        <button
          type="button"
          class="sched-category-btn"
          onclick="schedSelectTag(this)"
        >
          健康
        </button>
        <button
          type="button"
          class="sched-category-btn"
          onclick="schedSelectTag(this)"
        >
          趣味
        </button>
      </div>
      <input type="hidden" name="tag" id="schedTag" value="仕事" />
    </div>

    <div class="sched-form-section">
      <div class="sched-form-label">メモ</div>
      <textarea
        name="memo"
        class="sched-memo-textarea"
        placeholder="タスクのメモや手順を入力してください"
      >
{{ task.memo if task else '' }}</textarea
      >
    </div>

    <div class="sched-info-box">
      <span class="sched-info-icon">💡</span>
      <p class="sched-info-text">
        固定タスクは毎週決まった時間にカレンダーに追加されるよ
      </p>
    </div>
  </form>
</div>

<button type="submit" form="schedTaskForm" class="sched-submit-btn">
  登録
</button>
<script src="{{ url_for('static', filename='js/register_schedule.js') }}"></script>
{% endblock %}
