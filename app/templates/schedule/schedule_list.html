{% extends "base2.html" %} {% block title %} å›ºå®šã‚¿ã‚¹ã‚¯ä¸€è¦§{% endblock %} {%
block content %}
<div class="fixed-task-page">
  <div class="header">
    <h1>å›ºå®šã‚¿ã‚¹ã‚¯ä¸€è¦§</h1>
    <div class="tab-container">
      <button class="tab">ã‚¿ã‚¹ã‚¯</button>
      <button class="tab active">å›ºå®šã‚¿ã‚¹ã‚¯</button>
    </div>
  </div>

  <div class="task-list">
    {% for task in tasks %}
    <div class="task-card">
      <div class="task-header">
        <div class="task-title">{{ task.title }}</div>
        <button class="delete-btn" data-task-id="{{ task.id }}">ğŸ—‘</button>
      </div>

      <div class="task-meta">
        <span class="task-category">{{ task.tag }}</span>
        <span class="task-time">{{ task.start_time }}~{{ task.end_time }}</span>
        <span class="task-duration">{{ task.duration_min }}åˆ†</span>
      </div>

      {% if task.location %}
      <div class="task-location">
        <span class="location-icon">ğŸ“</span>
        <span>{{ task.location }}</span>
      </div>
      {% endif %}

      <div class="task-repeat-info">
        <span class="repeat-badge">{{ task.repeat_type }}</span>
      </div>

      {% if task.memo %}
      <div class="comment-section">
        <button class="comment-toggle" onclick="toggleComment(this)">
          <span class="arrow">â–¼</span>
          <span>ãƒ¡ãƒ¢</span>
        </button>
        <div class="comment-content">{{ task.memo }}</div>
      </div>
      {% endif %}

      <div class="weekday-pills">
        {% for day in ['æœˆ', 'ç«', 'æ°´', 'æœ¨', 'é‡‘', 'åœŸ', 'æ—¥'] %}
        <div
          class="weekday {% if day in task.day_of_week %}active{% else %}inactive{% endif %}"
        >
          {{ day }}
        </div>
        {% endfor %}
      </div>
    </div>
    {% endfor %}
  </div>

  <button
    class="add-task-btn"
    onclick="location.href='{{ url_for('schedule.schedule_form') }}'"
  >
    æ–°ã—ã„å›ºå®šã‚¿ã‚¹ã‚¯ã‚’ä½œæˆ
  </button>

  {% if tasks|length == 0 %}
  <p class="empty-message">ã‚¿ã‚¹ã‚¯ãŒã‚ã‚Šã¾ã›ã‚“</p>
  {% endif %}

  <p class="task-count">ä»¶æ•°ï¼š{{ tasks|length }}</p>
</div>

<!-- ã‚«ã‚¹ã‚¿ãƒ å‰Šé™¤ç¢ºèªãƒ¢ãƒ¼ãƒ€ãƒ« -->
<div id="deleteModal" class="delete-modal">
  <div class="delete-modal-content">
    <div class="delete-modal-icon">ğŸ—‘ï¸</div>
    <h3 class="delete-modal-title">ã‚¿ã‚¹ã‚¯ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ</h3>
    <p class="delete-modal-text">ã“ã®æ“ä½œã¯å–ã‚Šæ¶ˆã›ã¾ã›ã‚“</p>
    <div class="delete-modal-buttons">
      <button
        class="delete-modal-btn delete-cancel-btn"
        onclick="closeDeleteModal()"
      >
        ã‚­ãƒ£ãƒ³ã‚»ãƒ«
      </button>
      <button
        class="delete-modal-btn delete-confirm-btn"
        onclick="confirmDelete()"
      >
        å‰Šé™¤ã™ã‚‹
      </button>
    </div>
  </div>
</div>
<script src="{{ url_for('static', filename='js/schedule_list.js') }}"></script>

{% endblock %}
