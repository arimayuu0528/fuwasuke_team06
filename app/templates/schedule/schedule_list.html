{% extends "base2.html" %} {% block title %}å›ºå®šã‚¿ã‚¹ã‚¯ä¸€è¦§{% endblock %} {%
block content %}

<div class="sl-page">
  <!-- Header -->
  <div class="sl-header">
    <div class="sl-header-top">
      <button class="sl-back-btn" onclick="history.back()">&#8249;</button>
      <h1>å›ºå®šã‚¿ã‚¹ã‚¯ä¸€è¦§</h1>
    </div>
    <div class="sl-tab-container">
      <button
        class="sl-tab"
        onclick="location.href='{{ url_for('task.task_list') }}'"
      >
        ã‚¿ã‚¹ã‚¯
      </button>
      <button class="sl-tab active">å›ºå®šã‚¿ã‚¹ã‚¯</button>
    </div>
  </div>

  <!-- Task List -->
  <div class="sl-task-list">
    {% for task in tasks %}
    <div class="sl-task-card">
      <div class="sl-task-header">
        <div class="sl-task-title">{{ task.title }}</div>
        <button class="sl-delete-btn" data-task-id="{{ task.id }}">ğŸ—‘</button>
      </div>

      <div class="sl-task-meta">
        <span class="sl-task-category">{{ task.tag }}</span>
        <span class="sl-task-time"
          >{{ task.start_time }}~{{ task.end_time }}</span
        >
        <span class="sl-task-duration">{{ task.duration_min }}åˆ†</span>
      </div>

      {% if task.location %}
      <div class="sl-task-location">
        <span>ğŸ“</span><span>{{ task.location }}</span>
      </div>
      {% endif %}

      <div class="sl-task-repeat-info">
        <span class="sl-repeat-badge">{{ task.repeat_type }}</span>
      </div>

      {% if task.memo %}
      <div class="sl-comment-section">
        <button
          class="sl-comment-toggle collapsed"
          onclick="slToggleComment(this)"
        >
          <span class="sl-arrow">â–¼</span><span>ãƒ¡ãƒ¢</span>
        </button>
        <div class="sl-comment-content hidden">{{ task.memo }}</div>
      </div>
      {% endif %}

      <div class="sl-weekday-pills">
        {% for day in ['æœˆ', 'ç«', 'æ°´', 'æœ¨', 'é‡‘', 'åœŸ', 'æ—¥'] %}
        <div
          class="sl-weekday {% if day in task.day_of_week %}active{% endif %}"
        >
          {{ day }}
        </div>
        {% endfor %}
      </div>
    </div>
    {% endfor %}
  </div>

  {% if tasks|length == 0 %}
  <p class="sl-empty-message">ã‚¿ã‚¹ã‚¯ãŒã‚ã‚Šã¾ã›ã‚“</p>
  {% endif %}

  <p class="sl-task-count">ä»¶æ•°ï¼š{{ tasks|length }}</p>

  <button
    class="sl-add-btn"
    onclick="location.href='{{ url_for('schedule.schedule_form') }}'"
  >
    æ–°ã—ã„å›ºå®šã‚¿ã‚¹ã‚¯ã‚’ä½œæˆ
  </button>
</div>
<!-- /.sl-page -->

<!-- Delete Modal -->
<div id="slDeleteModal" class="sl-delete-modal">
  <div class="sl-modal-content">
    <div class="sl-modal-icon">ğŸ—‘ï¸</div>
    <h3 class="sl-modal-title">ã‚¿ã‚¹ã‚¯ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ</h3>
    <p class="sl-modal-text">ã“ã®æ“ä½œã¯å–ã‚Šæ¶ˆã›ã¾ã›ã‚“</p>
    <div class="sl-modal-btns">
      <button class="sl-modal-btn sl-cancel-btn" onclick="slCloseModal()">
        ã‚­ãƒ£ãƒ³ã‚»ãƒ«
      </button>
      <button class="sl-modal-btn sl-confirm-btn" onclick="slConfirmDelete()">
        å‰Šé™¤ã™ã‚‹
      </button>
    </div>
  </div>
</div>
<script src="{{ url_for('static', filename='js/schedule_list.js') }}"></script>
{% endblock %}
